<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión - SOULINK</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <!-- Estilos para validación -->
    <style>
        .is-invalid {
            border-color: #dc3545 !important;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right calc(0.375em + 0.1875rem) center;
            background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
        }
        
        .is-invalid:focus {
            border-color: #dc3545 !important;
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25) !important;
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.875em;
            margin-top: 0.25rem;
        }
        
        .invalid-feedback {
            display: block !important;
        }
        
        /* Para el checkbox de términos */
        #acceptTerms.is-invalid {
            outline: 2px solid #dc3545;
        }
        
        #acceptTerms.is-invalid ~ .form-check-label {
            color: #dc3545;
        }
        
        #acceptTerms.is-invalid ~ .form-check-label a {
            color: #dc3545;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Botón de Emergencia -->
    <div class="emergency-btn">
        <a href="contacto.html#emergencia" class="btn-emergency">
            <img src="../assets/images/ChatBot.png" alt="Icono de asistente virtual" class="chatbot-icon">
            <i class="fas fa-phone-alt"></i> NECESITO AYUDA AHORA
        </a>
    </div>

    <!-- Navegación -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <img src="../assets/images/logo_sin_nombre.png" alt="SOULINK Logo" height="40">
                <span class="brand-name">SOULINK</span>
            </a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Inicio</a></li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="acerca.html" data-toggle="dropdown">Acerca de</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="acerca.html#quienes-somos">¿Quiénes Somos?</a>
                            <a class="dropdown-item" href="acerca.html#mision-vision">Misión, Visión y Valores</a>
                            <a class="dropdown-item" href="acerca.html#equipo">Nuestro Equipo</a>
                            <a class="dropdown-item" href="acerca.html#faq">FAQ</a>
                            <a class="dropdown-item" href="acerca.html#resultados">Resultados</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="acerca.html">Ver Todo</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="servicios.html" data-toggle="dropdown">Servicios</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="servicios.html#foro">Foro Comunitario</a>
                            <a class="dropdown-item" href="servicios.html#tests">Tests</a>
                            <a class="dropdown-item" href="servicios.html#recursos">Recursos</a>
                            <a class="dropdown-item" href="servicios.html#juegos">Juegos</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="servicios.html">Explorar Todos</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="comunidad.html" data-toggle="dropdown">Comunidad</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="comunidad.html#testimonios">Testimonios</a>
                            <a class="dropdown-item" href="comunidad.html#experiencias">Experiencias</a>
                            <a class="dropdown-item" href="comunidad.html#articulos">Artículos</a>
                            <a class="dropdown-item" href="comunidad.html#eventos">Eventos</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="comunidad.html">Unirse</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="contacto.html" data-toggle="dropdown">Contacto</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="contacto.html#contacto-general">Contacto General</a>
                            <a class="dropdown-item" href="contacto.html#emergencia">Emergencias</a>
                            <a class="dropdown-item" href="contacto.html#chat">Chat</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="contacto.html">Ver Contactos</a>
                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="colaboraciones.html" data-toggle="dropdown">Colabora</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="colaboraciones.html#trabajo">Trabaja con Nosotros</a>
                            <a class="dropdown-item" href="colaboraciones.html#donaciones">Donaciones</a>
                            <a class="dropdown-item" href="colaboraciones.html#voluntariado">Voluntariado</a>
                            <a class="dropdown-item" href="colaboraciones.html#colaboraciones-institucionales">Institucionales</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="colaboraciones.html">Ver Oportunidades</a>
                        </div>
                    </li>

                    <li class="nav-item"><a class="nav-link" href="tienda.html">Tienda</a></li>
                    <li class="nav-item active">
                        <a class="nav-link" href="carrito.html" style="position: relative;">
                            <i class="fas fa-shopping-cart"></i>
                            <span id="cartBadgeNav" class="cart-badge-nav" style="display: none;">0</span>
                        </a>
                    </li>

                    <li class="nav-item active dropdown" id="userMenuContainer">
                        <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
                            <span id="userMenuText">Iniciar Sesión</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item" href="login.html#login">Iniciar Sesión</a>
                            <a class="dropdown-item" href="login.html#register">Crear Cuenta</a>
                            <a class="dropdown-item" href="login.html#recover">Recuperar Contraseña</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Sección de Login/Registro -->
    <section class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card auth-card">
                        <div class="card-body">
                            <ul class="nav nav-tabs" id="authTabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="login-tab" data-toggle="tab" href="#login">
                                        <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="register-tab" data-toggle="tab" href="#register">
                                        <i class="fas fa-user-plus"></i> Crear Cuenta
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="recover-tab" data-toggle="tab" href="#recover">
                                        <i class="fas fa-key"></i> Recuperar Contraseña
                                    </a>
                                </li>
                            </ul>

                            <div class="tab-content mt-4" id="authTabsContent">
                                <!-- Login Tab -->
                                <div class="tab-pane fade show active" id="login">
                                    <form id="loginForm">
                                        <div class="form-group">
                                            <label for="loginEmail">Email *</label>
                                            <input type="email" class="form-control" id="loginEmail" required>
                                            <!-- Aquí aparecerá el mensaje de error -->
                                        </div>

                                        <div class="form-group">
                                            <label for="loginPassword">Contraseña *</label>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="loginPassword" required>
                                                <div class="input-group-append">
                                                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <!-- Aquí aparecerá el mensaje de error -->
                                        </div>

                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="rememberMe">
                                            <label class="form-check-label" for="rememberMe">Recordarme</label>
                                            <a href="#recover" class="float-right" data-toggle="tab">¿Olvidaste tu contraseña?</a>
                                        </div>

                                        <button type="submit" class="btn btn-primary btn-block btn-lg">
                                            <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                                        </button>

                                        <div class="text-center mt-3">
                                            <p>O inicia sesión con:</p>
                                            <button type="button" class="btn btn-outline-primary mr-2"><i class="fab fa-google"></i> Google</button>
                                            <button type="button" class="btn btn-outline-primary"><i class="fab fa-facebook"></i> Facebook</button>
                                        </div>

                                        <div class="alert alert-info mt-4">
                                            <i class="fas fa-info-circle"></i>
                                            <strong>Nota:</strong> Puedes usar SOULINK sin crear una cuenta, pero algunas funciones como guardar tus resultados de tests o participar en el foro requieren registro.
                                        </div>
                                    </form>
                                </div>

                                <!-- Register Tab -->
                                <div class="tab-pane fade" id="register">
                                    <form id="registerForm">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="regNombre">Nombre *</label>
                                                    <input type="text" class="form-control" id="regNombre" required>
                                                    <!-- Aquí aparecerá el mensaje de error -->
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="regApellido">Apellido *</label>
                                                    <input type="text" class="form-control" id="regApellido" required>
                                                    <!-- Aquí aparecerá el mensaje de error -->
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="regEmail">Email *</label>
                                            <input type="email" class="form-control" id="regEmail" required>
                                            <!-- Aquí aparecerá el mensaje de error -->
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="regPassword">Contraseña *</label>
                                                    <div class="input-group">
                                                        <input type="password" class="form-control" id="regPassword" required>
                                                        <div class="input-group-append">
                                                            <button class="btn btn-outline-secondary" type="button" id="toggleRegPassword">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <small class="form-text text-muted">Mínimo 8 caracteres</small>
                                                    <!-- Aquí aparecerá el mensaje de error -->
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="regConfirmPassword">Confirmar Contraseña *</label>
                                                    <input type="password" class="form-control" id="regConfirmPassword" required>
                                                    <!-- Aquí aparecerá el mensaje de error -->
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label for="regFechaNacimiento">Fecha de Nacimiento</label>
                                            <input type="date" class="form-control" id="regFechaNacimiento">
                                            <!-- Aquí aparecerá el mensaje de error -->
                                        </div>

                                        <div class="form-group">
                                            <label>Género</label>
                                            <div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="genero" id="femenino" value="femenino">
                                                    <label class="form-check-label" for="femenino">Femenino</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="genero" id="masculino" value="masculino">
                                                    <label class="form-check-label" for="masculino">Masculino</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="genero" id="otro" value="otro">
                                                    <label class="form-check-label" for="otro">Otro</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" name="genero" id="prefieroNoDecir" value="prefieroNoDecir">
                                                    <label class="form-check-label" for="prefieroNoDecir">Prefiero no decir</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="acceptTerms" required>
                                            <label class="form-check-label" for="acceptTerms">
                                                Acepto los <a href="terminos.html" target="_blank">Términos y Condiciones</a> y la <a href="privacidad.html" target="_blank">Política de Privacidad</a> *
                                            </label>
                                            <!-- Aquí aparecerá el mensaje de error -->
                                        </div>

                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" id="newsletter">
                                            <label class="form-check-label" for="newsletter">Quiero recibir información sobre nuevos recursos y talleres</label>
                                        </div>

                                        <button type="submit" class="btn btn-success btn-block btn-lg">
                                            <i class="fas fa-user-plus"></i> Crear Cuenta
                                        </button>
                                    </form>
                                </div>

                                <!-- Recover Tab -->
                                <div class="tab-pane fade" id="recover">
                                    <form id="recoverForm">
                                        <div class="form-group">
                                            <label for="recoverEmail">Email registrado *</label>
                                            <input type="email" class="form-control" id="recoverEmail" required>
                                            <!-- Aquí aparecerá el mensaje de error -->
                                            <small class="form-text text-muted">Te enviaremos un enlace para restablecer tu contraseña</small>
                                        </div>

                                        <button type="submit" class="btn btn-primary btn-block btn-lg">
                                            <i class="fas fa-paper-plane"></i> Enviar Enlace de Recuperación
                                        </button>

                                        <div class="alert alert-success mt-3" id="recoverSuccess" style="display: none;">
                                            <i class="fas fa-check-circle"></i> Hemos enviado un enlace de recuperación a tu email. Revisa tu bandeja de entrada.
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Beneficios de Registro -->
                    <div class="card mt-4">
                        <div class="card-body">
                            <h5 class="card-title">¿Por qué registrarte en SOULINK?</h5>
                            <div class="row">
                                <div class="col-md-4 text-center">
                                    <i class="fas fa-history fa-2x text-primary"></i>
                                    <h6>Historial Personal</h6>
                                    <p>Guarda tus resultados de tests y sigue tu progreso</p>
                                </div>
                                <div class="col-md-4 text-center">
                                    <i class="fas fa-comments fa-2x text-success"></i>
                                    <h6>Participación en Foro</h6>
                                    <p>Comparte experiencias y recibe apoyo de la comunidad</p>
                                </div>
                                <div class="col-md-4 text-center">
                                    <i class="fas fa-bookmark fa-2x text-warning"></i>
                                    <h6>Recursos Guardados</h6>
                                    <p>Guarda tus recursos favoritos para acceder rápido</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p>&copy; 2025 SOULINK. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-md-right">
                    <a href="privacidad.html" class="text-white mr-3">Privacidad</a>
                    <a href="terminos.html" class="text-white">Términos</a>
                    <a href="contacto.html" class="text-white ml-3">Contacto</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Script de validación -->
    <script>
    // auth-validation.js - Validación en tiempo real para formularios de autenticación

    document.addEventListener('DOMContentLoaded', function() {
        // Inicializar todas las validaciones
        initLoginValidation();
        initRegisterValidation();
        initRecoverValidation();
        
        // Configurar toggle para contraseñas
        setupPasswordToggles();
    });

    // ==================== CONFIGURACIÓN DE TOGGLE PASSWORD ====================
    function setupPasswordToggles() {
        // Toggle para login
        const togglePassword = document.getElementById('togglePassword');
        if (togglePassword) {
            togglePassword.addEventListener('click', function() {
                const passwordInput = document.getElementById('loginPassword');
                togglePasswordVisibility(passwordInput, this);
            });
        }
        
        // Toggle para registro
        const toggleRegPassword = document.getElementById('toggleRegPassword');
        if (toggleRegPassword) {
            toggleRegPassword.addEventListener('click', function() {
                const passwordInput = document.getElementById('regPassword');
                togglePasswordVisibility(passwordInput, this);
            });
        }
    }

    function togglePasswordVisibility(input, button) {
        const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
        input.setAttribute('type', type);
        
        // Cambiar icono
        const icon = button.querySelector('i');
        if (type === 'text') {
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    }

    // ==================== VALIDACIÓN COMÚN ====================
    function showError(input, message) {
        const formGroup = input.closest('.form-group');
        
        // Remover error previo si existe
        const existingError = formGroup.querySelector('.error-message');
        if (existingError) {
            existingError.remove();
        }
        
        // Remover clase de error previa
        input.classList.remove('is-invalid');
        
        // Si hay mensaje, mostrar error
        if (message) {
            input.classList.add('is-invalid');
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message invalid-feedback d-block';
            errorDiv.textContent = message;
            formGroup.appendChild(errorDiv);
        }
    }

    function validateRequired(input) {
        const value = input.value.trim();
        if (!value) {
            showError(input, 'Este campo es requerido');
            return false;
        }
        showError(input, '');
        return true;
    }

    function validateEmail(input) {
        const email = input.value.trim();
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        
        if (!email) {
            showError(input, 'El email es requerido');
            return false;
        }
        
        if (!emailRegex.test(email)) {
            showError(input, 'Por favor ingresa un email válido (ejemplo@dominio.com)');
            return false;
        }
        
        showError(input, '');
        return true;
    }

    function validateName(input) {
        const name = input.value.trim();
        const nameRegex = /^[A-Za-zÁÉÍÓÚáéíóúñÑ\s-]+$/;
        
        if (!name) {
            showError(input, 'Este campo es requerido');
            return false;
        }
        
        if (name.length < 2) {
            showError(input, 'Debe tener al menos 2 caracteres');
            return false;
        }
        
        if (!nameRegex.test(name)) {
            showError(input, 'Solo se permiten letras, espacios y guiones');
            return false;
        }
        
        showError(input, '');
        return true;
    }

    function validatePassword(input) {
        const password = input.value;
        
        if (!password) {
            showError(input, 'La contraseña es requerida');
            return false;
        }
        
        if (password.length < 8) {
            showError(input, 'La contraseña debe tener al menos 8 caracteres');
            return false;
        }
        
        showError(input, '');
        return true;
    }

    function validateConfirmPassword(passwordInput, confirmInput) {
        const password = passwordInput.value;
        const confirm = confirmInput.value;
        
        if (!confirm) {
            showError(confirmInput, 'Por favor confirma tu contraseña');
            return false;
        }
        
        if (password !== confirm) {
            showError(confirmInput, 'Las contraseñas no coinciden');
            return false;
        }
        
        showError(confirmInput, '');
        return true;
    }

    function validateBirthDate(input) {
        const dateValue = input.value;
        
        if (!dateValue) {
            // La fecha es opcional, así que no mostramos error si está vacía
            showError(input, '');
            return true;
        }
        
        const birthDate = new Date(dateValue);
        const today = new Date();
        const minAgeDate = new Date();
        minAgeDate.setFullYear(today.getFullYear() - 13);
        
        if (birthDate > today) {
            showError(input, 'La fecha no puede ser futura');
            return false;
        }
        
        if (birthDate > minAgeDate) {
            showError(input, 'Debes tener al menos 13 años para registrarte');
            return false;
        }
        
        showError(input, '');
        return true;
    }

    // ==================== VALIDACIÓN LOGIN ====================
    function initLoginValidation() {
        const loginForm = document.getElementById('loginForm');
        if (!loginForm) return;
        
        const loginEmail = document.getElementById('loginEmail');
        const loginPassword = document.getElementById('loginPassword');
        
        // Validación en tiempo real
        if (loginEmail) {
            loginEmail.addEventListener('blur', () => validateEmail(loginEmail));
            loginEmail.addEventListener('input', () => {
                if (loginEmail.classList.contains('is-invalid')) {
                    validateEmail(loginEmail);
                }
            });
        }
        
        if (loginPassword) {
            loginPassword.addEventListener('blur', () => validatePassword(loginPassword));
            loginPassword.addEventListener('input', () => {
                if (loginPassword.classList.contains('is-invalid')) {
                    validatePassword(loginPassword);
                }
            });
        }
        
        // Validación al enviar
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            
            if (!validateEmail(loginEmail)) isValid = false;
            if (!validatePassword(loginPassword)) isValid = false;
            
            if (isValid) {
                // Aquí iría la lógica de envío real
                console.log('Login válido, enviando...');
                alert('Login exitoso (simulación)');
                // loginForm.submit(); // Descomentar para enviar realmente
            }
        });
    }

    // ==================== VALIDACIÓN REGISTRO ====================
    function initRegisterValidation() {
        const registerForm = document.getElementById('registerForm');
        if (!registerForm) return;
        
        // Obtener elementos
        const regNombre = document.getElementById('regNombre');
        const regApellido = document.getElementById('regApellido');
        const regEmail = document.getElementById('regEmail');
        const regPassword = document.getElementById('regPassword');
        const regConfirmPassword = document.getElementById('regConfirmPassword');
        const regFechaNacimiento = document.getElementById('regFechaNacimiento');
        const acceptTerms = document.getElementById('acceptTerms');
        
        // Validación en tiempo real para nombre
        if (regNombre) {
            regNombre.addEventListener('blur', () => validateName(regNombre));
            regNombre.addEventListener('input', () => {
                if (regNombre.classList.contains('is-invalid')) {
                    validateName(regNombre);
                }
            });
        }
        
        // Validación en tiempo real para apellido
        if (regApellido) {
            regApellido.addEventListener('blur', () => validateName(regApellido));
            regApellido.addEventListener('input', () => {
                if (regApellido.classList.contains('is-invalid')) {
                    validateName(regApellido);
                }
            });
        }
        
        // Validación en tiempo real para email
        if (regEmail) {
            regEmail.addEventListener('blur', () => validateEmail(regEmail));
            regEmail.addEventListener('input', () => {
                if (regEmail.classList.contains('is-invalid')) {
                    validateEmail(regEmail);
                }
            });
        }
        
        // Validación en tiempo real para contraseña
        if (regPassword) {
            regPassword.addEventListener('blur', () => {
                validatePassword(regPassword);
                if (regConfirmPassword && regConfirmPassword.value) {
                    validateConfirmPassword(regPassword, regConfirmPassword);
                }
            });
            regPassword.addEventListener('input', () => {
                if (regPassword.classList.contains('is-invalid')) {
                    validatePassword(regPassword);
                }
                if (regConfirmPassword && regConfirmPassword.value) {
                    validateConfirmPassword(regPassword, regConfirmPassword);
                }
            });
        }
        
        // Validación en tiempo real para confirmar contraseña
        if (regConfirmPassword) {
            regConfirmPassword.addEventListener('blur', () => validateConfirmPassword(regPassword, regConfirmPassword));
            regConfirmPassword.addEventListener('input', () => {
                if (regConfirmPassword.classList.contains('is-invalid')) {
                    validateConfirmPassword(regPassword, regConfirmPassword);
                }
            });
        }
        
        // Validación en tiempo real para fecha de nacimiento
        if (regFechaNacimiento) {
            regFechaNacimiento.addEventListener('blur', () => validateBirthDate(regFechaNacimiento));
            regFechaNacimiento.addEventListener('change', () => validateBirthDate(regFechaNacimiento));
        }
        
        // Validación al enviar
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            
            // Validar todos los campos
            if (!validateName(regNombre)) isValid = false;
            if (!validateName(regApellido)) isValid = false;
            if (!validateEmail(regEmail)) isValid = false;
            if (!validatePassword(regPassword)) isValid = false;
            if (!validateConfirmPassword(regPassword, regConfirmPassword)) isValid = false;
            if (!validateBirthDate(regFechaNacimiento)) isValid = false;
            
            // Validar términos y condiciones
            if (!acceptTerms.checked) {
                showError(acceptTerms, 'Debes aceptar los términos y condiciones');
                isValid = false;
            } else {
                showError(acceptTerms, '');
            }
            
            if (isValid) {
                // Aquí iría la lógica de envío real
                console.log('Registro válido, enviando...');
                alert('Registro exitoso (simulación)');
                // registerForm.submit(); // Descomentar para enviar realmente
            }
        });
    }

    // ==================== VALIDACIÓN RECUPERACIÓN ====================
    function initRecoverValidation() {
        const recoverForm = document.getElementById('recoverForm');
        if (!recoverForm) return;
        
        const recoverEmail = document.getElementById('recoverEmail');
        const recoverSuccess = document.getElementById('recoverSuccess');
        
        // Validación en tiempo real
        if (recoverEmail) {
            recoverEmail.addEventListener('blur', () => validateEmail(recoverEmail));
            recoverEmail.addEventListener('input', () => {
                if (recoverEmail.classList.contains('is-invalid')) {
                    validateEmail(recoverEmail);
                }
            });
        }
        
        // Validación al enviar
        recoverForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (validateEmail(recoverEmail)) {
                // Mostrar mensaje de éxito
                recoverSuccess.style.display = 'block';
                
                // Ocultar después de 5 segundos
                setTimeout(() => {
                    recoverSuccess.style.display = 'none';
                }, 5000);
                
                // Aquí iría la lógica de envío real
                console.log('Recuperación válida, enviando email...');
            }
        });
    }

    // ==================== FUNCIÓN PARA LIMPIAR FORMULARIO ====================
    function clearFormValidation(formId) {
        const form = document.getElementById(formId);
        if (!form) return;
        
        // Remover clases de error
        const invalidInputs = form.querySelectorAll('.is-invalid');
        invalidInputs.forEach(input => {
            input.classList.remove('is-invalid');
        });
        
        // Remover mensajes de error
        const errorMessages = form.querySelectorAll('.error-message');
        errorMessages.forEach(error => error.remove());
    }

    // ==================== MANEJO DE TABS ====================
    document.addEventListener('DOMContentLoaded', function() {
        // Limpiar validación al cambiar de tab
        const authTabs = document.querySelectorAll('a[data-toggle="tab"]');
        authTabs.forEach(tab => {
            tab.addEventListener('shown.bs.tab', function(e) {
                const target = e.target.getAttribute('href');
                
                switch(target) {
                    case '#login':
                        clearFormValidation('loginForm');
                        break;
                    case '#register':
                        clearFormValidation('registerForm');
                        break;
                    case '#recover':
                        clearFormValidation('recoverForm');
                        break;
                }
            });
        });
    });
    </script>
</body>
</html>